<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Add Questions</title>
</head>
<body>
    <h2>Add Quiz Question</h2>
    <input type="text" id="question" placeholder="Enter question"><br>
    <input type="text" id="option1" placeholder="Option 1"><br>
    <input type="text" id="option2" placeholder="Option 2"><br>
    <input type="text" id="option3" placeholder="Option 3"><br>
    <input type="text" id="option4" placeholder="Option 4"><br>
    <button id="saveBtn">Save Question</button>


    <script type="module">
        // üîπ Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // üîπ Firebase Configuration (Replace with your actual Firebase config)
        const firebaseConfig = {
             apiKey: "AIzaSyAdvbkZaLSJsJlaAkURHACbt2cJtemBa5U",
             authDomain: "quiz-app-e8d1d.firebaseapp.com",
             projectId: "quiz-app-e8d1d",
             storageBucket: "quiz-app-e8d1d.firebasestorage.app",
             messagingSenderId: "421848385039",
             appId: "1:421848385039:web:cbb560cf9d839752ce457a",
             measurementId: "G-MBCSZVWMZP"
        };

        // üîπ Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById("saveBtn").addEventListener("click", saveQuestion);
        
        async function saveQuestion() {
            console.log("üü¢ saveQuestion() called");

            const questionInput = document.getElementById("question");
            const option1 = document.getElementById("option1");
            const option2 = document.getElementById("option2");
            const option3 = document.getElementById("option3");
            const option4 = document.getElementById("option4");

            const question = questionInput.value.trim();
            const options = [
                option1.value.trim(),
                option2.value.trim(),
                option3.value.trim(),
                option4.value.trim()
            ];

            // üîπ Ensure all fields are filled
            if (question === "" || options.some(opt => opt === "")) {
                alert("Please fill all fields.");
                console.warn("‚ö†Ô∏è Fields are empty. Question not saved.");
                return;
            }

            try {
                console.log("üü° Adding question to Firebase...");
                await addDoc(collection(db, "quizQuestions"), { question, options });
                console.log("‚úÖ Question added successfully!");

                alert("‚úÖ Question Added!");

                // üîπ Reset input fields
                questionInput.value = "";
                option1.value = "";
                option2.value = "";
                option3.value = "";
                option4.value = "";

                console.log("üü¢ Fields cleared successfully.");
            } catch (error) {
                console.error("‚ùå Error adding question:", error);
            }
        }
    </script>
</body>
</html>
